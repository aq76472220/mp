define(["require","axios","libs/util"],function(e,t,r){const s=function(t){var r=t.statusText,s=t.status,n=t.request.responseURL,o={type:"ajax",code:s,mes:r,url:n},u=e("../store/index");n.includes("save_error_logger")||u.dispatch("addErrorLog",o)};var n=function(e){this.baseUrl=e,this.queue={}};return n.prototype.getInsideConfig=function(){return{baseURL:this.baseUrl,headers:{},auth:!1}},n.prototype.destroy=function(e){delete this.queue[e],Object.keys(this.queue).length},n.prototype.interceptors=function(t,n){var o=n.url,u=this;t.interceptors.request.use(function(e){return Object.keys(u.queue).length,u.queue[o]=!0,n.auth&&(e.headers["x-token"]=r.getToken()),e},function(e){return Promise.reject(e)}),t.interceptors.response.use(function(t){u.destroy(o);var r=t.data,s=t.status;if(400==r.code)return Promise.reject(r.error);if(201==r.code)return Promise.reject(r.error);if(void 0!=t.headers.http_x_auth_token){e("../store/index").commit("setToken",t.headers.http_x_auth_token)}return{data:r,status:s}},function(e){return u.destroy(o),s(e.response),Promise.reject(e)})},n.prototype.request=function(e){const r=t.create();return e=Object.assign(this.getInsideConfig(),e),this.interceptors(r,e),r(e)},n});